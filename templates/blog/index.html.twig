{% extends 'base.html.twig' %}

{% block title %}Selon Vous ? Les derniers articles{% endblock %}

{% block body %}
    <div class="top-home">
        <img class="top-picture" src="/_assets/pictures/top-picture.jpg">
        {# <img class="image-front my-3" src="/_assets/pictures/selonvous.png"> #}
       {#  <p style="color:#95d1b5;font-size:4em">ğŸ†‚ğŸ…´ğŸ…»ğŸ…¾ğŸ…½ ğŸ†…ğŸ…¾ğŸ†„ğŸ†‚ ?</p> #}
        <p style="color:#95d1b5;font-size:3em">ğŸ†‚elon ğŸ†…ous ?</p>
        <h4 class="mb-4"><strong>Le blog qui vous laisse la ğŸ…¿ğŸ…°ğŸ†ğŸ…¾ğŸ…»ğŸ…´...</strong></h4>
        {% if app.user %}
        
            <h3>Bonjour {{ app.user.getFullName() }}</h3>
        {% endif %}
        <p class="intro mt-3">Sur ce site, vous pouvez Ã©crire des articles Ã  propos de sujets que vous maÃ®trisez, que vous voulez partager ou simplement
        qui vous tiennent Ã  coeur. Vous pouvez Ã©galement rÃ©agir aux articles des autres auteurs et leur laisser un commentaire (bien sÃ»r dans 
        le respect des conditions gÃ©nÃ©rales d'utilisation du site que vous pouvez <strong><a href="">consulter  ici</a></strong>).
        Besoin d'un petit coup de pouce pour utiliser ce site ? Pas de panique, tout est <strong><a href="">expliquÃ© lÃ  !</a></strong>.</p>
    </div>
    
    <div class="articles-infos my-5">
       <h5>Au {{ "now"|date("d/m/Y") }}, <strong>{{ articles|length }} articles</strong> sont disponibles</h5>
    </div>
    <div class="articles">
    {% for article in articles %}
        <a href="/article/{{ article.slug }}" class="article-item">
            <div style="overflow:hidden; display:flex; align-items:center; justify-content:center" class="article-image">
                <img src="{{ article.imageUrl }}">
            </div>
            <div class="article-details flex">
                <div class="article-author-details">
                    <div class="article-author-picture">
                        {% if article.author.profile is null %}
                            <img src="/_assets/pictures/default_author.jpg" alt="Image de profile de {{ article.author.fullname }}">
                        {% else %}
                            <img src="{{ article.author.profile.picture }}" alt="Image de profile de {{ article.author.fullname }}">
                        {% endif %}
                    </div>
                </div>
                <div class="article-content-details">
                    <h2 class="article-title">{{ article.title }}</h2>
                    <div class="article-createdAt">{{ article.fromNow }}</div>

                </div>
            </div>
            
            {% if article.comments|length != 0 %}
                <div class="corner">
                    <div class="ranking ms-2">
                        {{article.comments|length }} <i class="bi bi-chat-text ml-1"></i>
                    </div>
                </div>
            {% endif %}
            
        </a>
    {% endfor %}
    </div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js" integrity="sha512-pumBsjNRGGqkPzKHndZMaAG+bir374sORyzM3uulLV14lN5LyykqNk8eEeUlUkB3U0M4FApyaHraT65ihJhDpQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
$("img").on("error", function() {
    $(this).attr("src", "/_assets/pictures/default_image.jpg");
})
</script>
{% endblock %}

