{% extends 'base.html.twig' %}

{% block title %}New Article{% endblock %}

{% block body %}
    <h2 class="form-title">RÃ©diger un nouvel article</h2>
    {# Add parameter required to help the template to decided if the image is required (new article) or not (update article) #}
    {{ include('article/_form.html.twig', {required: "required"}) }}

    <a href="{{ path('app_article_index') }}">back to list</a>
   
{% endblock %}

{% block javascripts %}
{# Script to use select2 #}
<script>

    $(document).ready(function() {
        $('.choices_categories').select2();

        {# Script to display new image just after its choice #}
        $("input[type='file']").change(function() {
        var file = $(this).get(0).files[0];
        console.log("hello");
        if(file) {
            var reader = new FileReader();
            reader.onload = function() {
                var img = `<img src='${reader.result}'/>`;
                $(".image-preview").html(img);
            }
            reader.readAsDataURL(file)
        }
        });
    });
</script>
{# Script to use CKEditor #}
<script>
    ClassicEditor
        .create( document.querySelector( '#article_content' ) )
        .then( editor => {
                console.log( editor );
        } )
        .catch( error => {
                console.error( error );
        } );
</script>

{% endblock %}
